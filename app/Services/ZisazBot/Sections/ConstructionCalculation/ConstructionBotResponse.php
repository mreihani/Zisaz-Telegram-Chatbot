<?php

namespace App\Services\ZisazBot\Sections\ConstructionCalculation;

use PDF;
use App\Services\ZisazBot\Sections\ConstructionCalculation\ConstructionCalculation;

class ConstructionBotResponse extends ConstructionCalculation {

    public $telegram;
    public $latestAction;
    public $construction;
    public $user;

    public function __construct($telegram) {
        $this->telegram = $telegram;
        $this->user = $this->getUser($telegram);
        $this->latestAction = $this->getLastActionObject($telegram);
        $this->construction = $this->latestAction->construction->first();
    }

    public function processParameterSubmission() {
        if(empty($this->construction->c)) {
            return $this->sendPamameterCText();
        } elseif(empty($this->construction->m)) {
            // return $this->sendPamameterMText();
        } elseif(empty($this->construction->a)) {
            // return $this->sendPamameterAText();
        } else {
            // return $this->displayFinalResults();
        }
    }

    public function sendPamameterCText() {
        try {
            $text = 'Ù†Ø§Ù… Ø´Ù‡Ø± Ø±Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯';
            $option = array( 
                // First row
                array($this->telegram->buildInlineKeyBoardButton('ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª', '', '/getmenu')), 
            );
            $keyb = $this->telegram->buildInlineKeyBoard($option);
            $this->sendMessageWithInlineKeyBoard($this->telegram, $keyb, $text);

        } catch (\Exception $e) {
            // \Log::info('An error occurred: ' . $e->getMessage());
        }
    }
   
    public function sendPamameterMText() {
        try {
            $text = 'Ù…ÙˆÙ‚Ø¹ÛŒØª Ù‚Ø±Ø§Ø±Ú¯ÛŒØ±ÛŒ Ù…Ù„Ú© Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ù†Ù…Ø§ÛŒÛŒØ¯';
            $option = array( 
                // First row
                array($this->telegram->buildInlineKeyBoardButton('ğŸ”™ Ø¨Ø§Ø²Ú¯Ø´Øª', '', '/getmenu')), 
            );
            $keyb = $this->telegram->buildInlineKeyBoard($option);
            $this->sendMessageWithInlineKeyBoard($this->telegram, $keyb, $text);

        } catch (\Exception $e) {
            // \Log::info('An error occurred: ' . $e->getMessage());
        }
    }
}