<?php

namespace App\Services\ZisazBot\Sections;

use App\Services\ZisazBot\ZisazBot;

class StartSection extends ZisazBot {

    public $telegram;
    public $user;

    public function __construct($telegram) {
        $this->telegram = $telegram;
        $this->user = $this->setUser($telegram);
    }

    public function displayItem() {
       
        $chat_id = $this->telegram->ChatID();

        if(!cache()->has("chat_id_{$chat_id}")) {
            // send welcome message if first time message
            $text = "
Ø¨Ù‡ Ø±Ø¨Ø§Øª ðŸ¤– Ù…Ø­Ø§Ø³Ø¨Ø§Øª ðŸ§® Ú©Ø§Ø±Ú¯Ø§Ù‡ÛŒ Ø³Ø§Ø®Øª Ùˆ Ø³Ø§Ø² Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯.

âœ” Ø§ÛŒÙ† Ø±Ø¨Ø§Øª Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø³Ø±ÛŒØ¹ Ú©Ø§Ø±Ú¯Ø§Ù‡ÛŒ Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª.

âœ” Ø¯Ù‚Øª Ø§ÛŒÙ† Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ Ø¨Ù‡ Ø¯Ù‚Øª Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ±ÙˆØ¯ÛŒ Ø´Ù…Ø§ ÙˆØ§Ø¨Ø³ØªÙ‡ Ø§Ø³Øª. 

âœ” Ø¨Ø±Ø§ÛŒ Ú©Ø³Ø¨ Ù†ØªØ§ÛŒØ¬ Ø¯Ù‚ÛŒÙ‚ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ§Ù‚Ø¹ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ Ùˆ Ø§Ø² Ù†ØªØ§ÛŒØ¬ ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡ Ø¯Ù‚ÛŒÙ‚ Ø¢Ù† Ù„Ø°Øª Ø¨Ø¨Ø±ÛŒØ¯.
 
âœ” Ø¯Ø± ØµÙˆØ±Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø¹Ø¯Ø§Ø¯ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ØŒ Ù†ØªØ§ÛŒØ¬ Ù…Ø­Ø§Ø³Ø¨Ø§Øª ØªØ§ 85 Ø§Ù„ÛŒ 90 Ø¯Ø±ØµØ¯ Ø¯Ù‚Øª Ø¯Ø§Ø±Ø¯. 

âœ” Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ ØªÙ†ÙˆØ¹ Ø´Ø±Ø§ÛŒØ· Ø§Ø¬Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ Ùˆ ØªÙ„ÙˆØ±Ø§Ù†Ø³â€ŒÙ‡Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒÛŒ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ØŒ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¯Ù‚ÛŒÙ‚ Ø¨Ø± Ø¹Ù‡Ø¯Ù‡ Ù…Ø¬Ø±ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ù…ÛŒâ€ŒØ¨Ø§Ø´Ø¯. 

âš  Ú©Ù„ÛŒÙ‡ Ø­Ù‚ÙˆÙ‚ Ù…Ø§Ø¯ÛŒ Ùˆ Ù…Ø¹Ù†ÙˆÛŒ Ø§ÛŒÙ† Ø±Ø¨Ø§Øª Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ø´Ø±Ú©Øª Ù…Ù‡Ù†Ø¯Ø³ÛŒ Ùˆ Ø§Ù…Ù„Ø§Ú© Ø¬Ø§Ø¨Ø§Ù† Ø¨Ø§ Ø¨Ø±Ù†Ø¯ (Ø²ÛŒ Ø³Ø§Ø²) Ù…ÛŒâ€ŒØ¨Ø§Ø´Ø¯. 
";
        cache()->forever("chat_id_{$chat_id}", true);

        $option = array( 
            // First row
            array($this->telegram->buildInlineKeyBoardButton('Ø´Ø±ÙˆØ¹', '', '/getmenu')), 
        );

        } else {
            $text = '
âœ” Ø§ÛŒÙ† Ø±Ø¨Ø§Øª Ø¨Ø±Ø§ÛŒ Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø³Ø±ÛŒØ¹ Ú©Ø§Ø±Ú¯Ø§Ù‡ÛŒ Ø·Ø±Ø§Ø­ÛŒ Ø´Ø¯Ù‡ Ø§Ø³Øª.

âœ” Ø¯Ù‚Øª Ø§ÛŒÙ† Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ Ø¨Ù‡ Ø¯Ù‚Øª Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ±ÙˆØ¯ÛŒ Ø´Ù…Ø§ ÙˆØ§Ø¨Ø³ØªÙ‡ Ø§Ø³Øª. 

âœ” Ø¨Ø±Ø§ÛŒ Ú©Ø³Ø¨ Ù†ØªØ§ÛŒØ¬ Ø¯Ù‚ÛŒÙ‚ Ù…ÛŒâ€ŒØªÙˆØ§Ù†ÛŒØ¯ Ø§Ø·Ù„Ø§Ø¹Ø§Øª ÙˆØ§Ù‚Ø¹ÛŒ Ø±Ø§ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯ Ùˆ Ø§Ø² Ù†ØªØ§ÛŒØ¬ ÙÙˆÙ‚â€ŒØ§Ù„Ø¹Ø§Ø¯Ù‡ Ø¯Ù‚ÛŒÙ‚ Ø¢Ù† Ù„Ø°Øª Ø¨Ø¨Ø±ÛŒØ¯.
 
âœ” Ø¯Ø± ØµÙˆØ±Øª Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ø§Ø¹Ø¯Ø§Ø¯ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ØŒ Ù†ØªØ§ÛŒØ¬ Ù…Ø­Ø§Ø³Ø¨Ø§Øª ØªØ§ 85 Ø§Ù„ÛŒ 90 Ø¯Ø±ØµØ¯ Ø¯Ù‚Øª Ø¯Ø§Ø±Ø¯. 

âœ” Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ ØªÙ†ÙˆØ¹ Ø´Ø±Ø§ÛŒØ· Ø§Ø¬Ø±Ø§ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ Ùˆ ØªÙ„ÙˆØ±Ø§Ù†Ø³â€ŒÙ‡Ø§ÛŒ Ø§Ø¬Ø±Ø§ÛŒÛŒ Ø¯Ø± Ù¾Ø±ÙˆÚ˜Ù‡â€ŒÙ‡Ø§ØŒ Ù…Ø³Ø¦ÙˆÙ„ÛŒØª Ù…Ø­Ø§Ø³Ø¨Ø§Øª Ø¯Ù‚ÛŒÙ‚ Ø¨Ø± Ø¹Ù‡Ø¯Ù‡ Ù…Ø¬Ø±ÛŒ Ù¾Ø±ÙˆÚ˜Ù‡ Ù…ÛŒâ€ŒØ¨Ø§Ø´Ø¯. 

âš  Ú©Ù„ÛŒÙ‡ Ø­Ù‚ÙˆÙ‚ Ù…Ø§Ø¯ÛŒ Ùˆ Ù…Ø¹Ù†ÙˆÛŒ Ø§ÛŒÙ† Ø±Ø¨Ø§Øª Ù…ØªØ¹Ù„Ù‚ Ø¨Ù‡ Ø´Ø±Ú©Øª Ù…Ù‡Ù†Ø¯Ø³ÛŒ Ùˆ Ø§Ù…Ù„Ø§Ú© Ø¬Ø§Ø¨Ø§Ù† Ø¨Ø§ Ø¨Ø±Ù†Ø¯ (Ø²ÛŒ Ø³Ø§Ø²) Ù…ÛŒâ€ŒØ¨Ø§Ø´Ø¯. 
            ';

            $option = array( 
                // First row
                array($this->telegram->buildInlineKeyBoardButton('Ø§Ø¯Ø§Ù…Ù‡', '', '/getmenu')), 
            );
        }

        $keyb = $this->telegram->buildInlineKeyBoard($option);

        $this->sendMessageWithInlineKeyBoard($this->telegram, $keyb, $text);
    }
} 